(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Hkv4:function(e,t,n){"use strict";n.r(t),n.d(t,"ClientsModule",(function(){return y}));var i=n("tyNb"),r=n("3Pt+"),s=n("PdH4"),o=n.n(s),a=n("fXoL"),l=n("0rIZ"),d=n("nm5K"),b=n("mAmA"),c=n("lkLn"),u=n("ofXK"),m=n("Pd9Q");function f(e,t){if(1&e){const e=a.Sb();a.Rb(0,"div",5),a.Rb(1,"div",6),a.Nb(2,"i",7),a.Hc(3," \u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 "),a.Qb(),a.Rb(4,"div",8),a.Rb(5,"form",9),a.dc("submit",(function(){return a.yc(e),a.hc().onSubmit()})),a.Rb(6,"div",10),a.Rb(7,"label",11),a.Hc(8," \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644 "),a.Rb(9,"span",12),a.Hc(10,"*"),a.Qb(),a.Qb(),a.Nb(11,"input",13),a.Nb(12,"i",14),a.Qb(),a.Rb(13,"div",10),a.Rb(14,"label",11),a.Hc(15," \u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644 "),a.Rb(16,"span",12),a.Hc(17,"*"),a.Qb(),a.Qb(),a.Nb(18,"input",15),a.Nb(19,"i",16),a.Qb(),a.Rb(20,"div",10),a.Rb(21,"label",11),a.Hc(22," \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0643\u062a\u0631\u0648\u0646\u064a "),a.Rb(23,"span",12),a.Hc(24,"*"),a.Qb(),a.Qb(),a.Nb(25,"input",17),a.Nb(26,"i",18),a.Qb(),a.Rb(27,"div",10),a.Rb(28,"label",11),a.Hc(29," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 "),a.Rb(30,"span",12),a.Hc(31,"*"),a.Qb(),a.Qb(),a.Nb(32,"input",19),a.Nb(33,"i",14),a.Qb(),a.Rb(34,"div",10),a.Rb(35,"label",11),a.Hc(36," \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0633\u0631\u064a "),a.Rb(37,"span",12),a.Hc(38,"*"),a.Qb(),a.Qb(),a.Nb(39,"input",20),a.Nb(40,"i",21),a.Qb(),a.Rb(41,"div",22),a.Rb(42,"button",23),a.Nb(43,"i",24),a.Hc(44," \u062d\u0641\u0638 "),a.Qb(),a.Rb(45,"button",25),a.dc("click",(function(){a.yc(e);const t=a.hc();return t.addClientForm.reset(),t.showAddClient=!1,t.targetClient=null})),a.Nb(46,"i",26),a.Hc(47," \u0627\u0644\u063a\u0627\u0621 "),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&e){const e=a.hc();a.zb(5),a.oc("formGroup",e.addClientForm),a.zb(6),a.Eb("err",e.formSubmitted&&e.addClientForm.get("full_name").invalid),a.zb(7),a.Eb("err",e.formSubmitted&&e.addClientForm.get("phone_number").invalid),a.zb(7),a.Eb("err",e.formSubmitted&&e.addClientForm.get("email").invalid),a.zb(7),a.Eb("err",e.formSubmitted&&e.addClientForm.get("username").invalid),a.zb(7),a.Eb("err",e.formSubmitted&&e.addClientForm.get("new_password1").invalid)}}const h=function(){return{name:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",nameKey:"full_name",icon:"fas fa-user"}},p=function(){return{name:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644",nameKey:"phone_number",icon:"fas fa-phone_number-alt"}},C=function(){return{name:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a",nameKey:"email",icon:"fas fa-envelope"}},v=function(){return{name:"\u0639\u062f\u062f \u0627\u0644\u0645\u0634\u0627\u0631\u064a\u0639",nameKey:"projects_count",icon:"fas fa-home"}},w=function(e,t,n,i){return[e,t,n,i]},R=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.formBuilder=e,this.clientsService=t,this.apiService=n,this.toster=i,this.showAddClient=!1,this.formSubmitted=!1}ngOnInit(){this.clientsService.clients?this.clients=this.clientsService.clients:this.getClients(),this.createForm()}createForm(){this.addClientForm=this.formBuilder.group({full_name:[null,[r.p.required]],phone_number:[null,[r.p.required]],email:[null,[r.p.required,r.p.email]],username:[null,[r.p.required]],new_password1:[null,[r.p.required]]})}getClients(){this.clientsService.getClients().subscribe(e=>{e.status&&(this.clients=e.data)})}addClient(){this.showAddClient=!0}editClient(e){this.targetClient=e,this.addClientForm.reset(),this.formSubmitted=!1,this.addClientForm.patchValue({full_name:e.full_name,phone_number:e.phone_number,email:e.email,username:e.username,new_password1:e.new_password1}),this.showAddClient=!0}deleteClient(e){o.a.fire({title:"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u061f",icon:"danger",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645",cancelButtonText:"\u0627\u0644\u063a\u0627\u0621"}).then(t=>{t.value&&this.apiService.deleteReq(`clients/${e}/`).subscribe(e=>{e.status?(o.a.fire("\u062a\u0645"),this.getClients()):this.toster.showError(e.message)},e=>{this.toster.showError()})})}onSubmit(e="add"){if(this.formSubmitted=!0,this.addClientForm.valid){const t=this.addClientForm.value;t.new_password2=t.new_password1,this.targetClient&&(e="edit"),this.addEditClient(e,t).subscribe(e=>{e.status?(this.clients=null,this.getClients(),this.addClientForm.reset(),this.formSubmitted=!1,this.targetClient=null):this.toster.showError(e.errors?e.errors[0]:e.message)},e=>{this.toster.showError()})}}addEditClient(e,t){return"add"===e?this.apiService.postReq("clients/",t):this.apiService.patchReq(`clients/${this.targetClient.id}/`,t)}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(r.c),a.Mb(l.a),a.Mb(d.a),a.Mb(b.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["clients"]],decls:5,vars:13,consts:[[1,"row"],[1,"col-md-9"],[3,"data","addLabel","tableHeads","add","edit","delete"],[1,"col-md-3"],["class","card",4,"ngIf"],[1,"card"],[1,"add-card-title"],[1,"fas","fa-user-plus"],[1,"card-body"],[1,"form",3,"formGroup","submit"],[1,"form-group"],["for","",1,"control-label"],[1,"annotation-required"],["type","text","formControlName","full_name",1,"form-control"],[1,"fas","fa-user"],["type","text","numbersOnly","","formControlName","phone_number",1,"form-control"],[1,"fas","fa-mobile-alt"],["type","email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["type","text","formControlName","username",1,"form-control"],["type","password","formControlName","new_password1",1,"form-control"],[1,"fas","fa-lock"],[1,"action-btns","d-flex","justify-content-end"],["type","submit",1,"btn","btn-green"],[1,"fas","fa-save"],[1,"btn","btn-red",3,"click"],[1,"fas","fa-times-circle"]],template:function(e,t){1&e&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Rb(2,"data-table",2),a.dc("add",(function(){return t.addClient()}))("edit",(function(e){return t.editClient(e)}))("delete",(function(e){return t.deleteClient(e)})),a.Qb(),a.Qb(),a.Rb(3,"div",3),a.Fc(4,f,48,11,"div",4),a.Qb(),a.Qb()),2&e&&(a.zb(2),a.oc("data",t.clients)("addLabel","\u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644")("tableHeads",a.vc(8,w,a.rc(4,h),a.rc(5,p),a.rc(6,C),a.rc(7,v))),a.zb(2),a.oc("ngIf",t.showAddClient))},directives:[c.a,u.l,r.r,r.j,r.e,r.b,r.i,r.d,m.a],styles:[""]}),e})()}];let Q=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(R)],i.f]}),e})();var g=n("PCNd");let y=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[g.a,Q,r.f,r.n]]}),e})()}}]);