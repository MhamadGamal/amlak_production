(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{urco:function(t,e,r){"use strict";r.r(e),r.d(e,"ReportsModule",(function(){return q}));var a=r("3Pt+"),i=r("ofXK"),s=r("fXoL"),o=r("0rIZ"),n=r("5aeq"),c=r("nm5K"),d=r("mAmA"),l=r("tyNb");function b(t,e){1&t&&(s.Rb(0,"label",16),s.Hc(1,"\u0627\u0644\u0645\u0648\u0627\u062f"),s.Qb())}function u(t,e){1&t&&(s.Rb(0,"label",16),s.Hc(1,"\u0627\u0644\u0645\u0648\u0631\u062f"),s.Qb())}function m(t,e){1&t&&(s.Rb(0,"label",16),s.Hc(1,"\u0645\u0644\u062d\u0648\u0638\u0629"),s.Qb())}function p(t,e){if(1&t){const t=s.Sb();s.Rb(0,"button",17),s.dc("click",(function(){s.yc(t);const e=s.hc();return e.addMaterials.emit(e.index+1)})),s.Nb(1,"i",18),s.Qb()}}function h(t,e){1&t&&s.Nb(0,"i",19)}function f(t,e){1&t&&s.Nb(0,"i",20)}let g=(()=>{class t{constructor(t,e,r){this.formBuilder=t,this.apiService=e,this.toaster=r,this.lastChild=!1,this.addMaterials=new s.n,this.deleteMaterials=new s.n,this.pageType="add",this.showLoader=!1}ngOnInit(){this.createForm(),this.data&&(this.pageType="edit",this.usedMaterialsForm.patchValue({material:this.data.material,supplier:this.data.supplier,note:this.data.note}))}createForm(){this.usedMaterialsForm=this.formBuilder.group({material:[""],supplier:[""],note:[""]})}addUsedMaterials(t){this.showLoader=!0,t.project=this.projectId,"add"===this.pageType?this.apiService.postReq("used-materials-staff/",t).subscribe(t=>{t.status?this.toaster.showSuccess("\u062a\u0645\u062a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0627\u062f \u0628\u0646\u062c\u0627\u062c"):this.toaster.showError(t.errors?t.errors[0]:t.message),this.showLoader=!1},t=>{this.showLoader=!1,this.toaster.showError()}):this.apiService.patchReq(`used-materials-staff/${this.data.id}/`,t).subscribe(t=>{t.status?this.toaster.showSuccess("\u062a\u0645\u062a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0648\u0627\u062f \u0628\u0646\u062c\u0627\u062c"):this.toaster.showError(t.errors?t.errors[0]:t.message),this.showLoader=!1},t=>{this.showLoader=!1,this.toaster.showError()})}deleteMAterials(){this.apiService.deleteReq(`used-materials-staff/${this.data.id}/`).subscribe(t=>{t.status?this.toaster.showSuccess("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641"):this.toaster.showError(t.errors?t.errors[0]:t.message),this.showLoader=!1},t=>{this.showLoader=!1,this.toaster.showError()})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(a.c),s.Mb(c.a),s.Mb(d.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["used-materials"]],inputs:{data:"data",index:"index",projectId:"projectId",lastChild:"lastChild"},outputs:{addMaterials:"addMaterials",deleteMaterials:"deleteMaterials"},decls:23,vars:8,consts:[[1,"form",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-11"],[1,"col-md-4","col-sm-6"],["class","control-label",4,"ngIf"],[1,"form-group"],["type","text","formControlName","material",1,"form-control"],["type","text","formControlName","supplier",1,"form-control"],["type","text","formControlName","note",1,"form-control"],[1,"col-md-1","d-flex","align-items-end","mb-3","justify-content-end"],["type","button","class","txt-green mr-1",3,"click",4,"ngIf"],["type","submit",1,"txt-green","mr-1",3,"disabled"],["class","fas fa-check",4,"ngIf"],["class","fas fa-spinner",4,"ngIf"],["type","button",1,"txt-red","mr-1",3,"click"],[1,"fas","fa-trash-alt"],[1,"control-label"],["type","button",1,"txt-green","mr-1",3,"click"],[1,"fas","fa-plus"],[1,"fas","fa-check"],[1,"fas","fa-spinner"]],template:function(t,e){1&t&&(s.Rb(0,"form",0),s.dc("ngSubmit",(function(){return e.addUsedMaterials(e.usedMaterialsForm.value)})),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Rb(3,"div",1),s.Rb(4,"div",3),s.Fc(5,b,2,0,"label",4),s.Rb(6,"div",5),s.Nb(7,"input",6),s.Qb(),s.Qb(),s.Rb(8,"div",3),s.Fc(9,u,2,0,"label",4),s.Rb(10,"div",5),s.Nb(11,"input",7),s.Qb(),s.Qb(),s.Rb(12,"div",3),s.Fc(13,m,2,0,"label",4),s.Rb(14,"div",5),s.Nb(15,"input",8),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(16,"div",9),s.Fc(17,p,2,0,"button",10),s.Rb(18,"button",11),s.Fc(19,h,1,0,"i",12),s.Fc(20,f,1,0,"i",13),s.Qb(),s.Rb(21,"button",14),s.dc("click",(function(){return e.deleteMaterials.emit(e.index),e.deleteMAterials()})),s.Nb(22,"i",15),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.oc("formGroup",e.usedMaterialsForm),s.zb(5),s.oc("ngIf",0===e.index),s.zb(4),s.oc("ngIf",0===e.index),s.zb(4),s.oc("ngIf",0===e.index),s.zb(4),s.oc("ngIf",e.lastChild),s.zb(1),s.oc("disabled",e.showLoader),s.zb(1),s.oc("ngIf",!e.showLoader),s.zb(1),s.oc("ngIf",e.showLoader))},directives:[a.r,a.j,a.e,i.l,a.b,a.i,a.d],styles:["button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;padding:5px}"]}),t})();var v=r("PTt/"),R=r("xJkR");function y(t,e){if(1&t&&(s.Rb(0,"option",27),s.Hc(1),s.Qb()),2&t){const t=e.$implicit;s.oc("value",t.id),s.zb(1),s.Jc(" ",t.name," ")}}function Q(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div"),s.Rb(1,"used-materials",30),s.dc("deleteMaterials",(function(e){return s.yc(t),s.hc(3).usedMaterials.splice(e,1)}))("addMaterials",(function(e){return s.yc(t),s.hc(3).usedMaterials.push(e+1)})),s.Qb(),s.Qb()}if(2&t){const t=e.$implicit,r=e.index,a=s.hc(3);s.zb(1),s.oc("projectId",a.editProject.id)("data",t.id?t:null)("index",r)("lastChild",r===a.usedMaterials.length-1)}}function _(t,e){if(1&t&&(s.Rb(0,"div",28),s.Fc(1,Q,2,4,"div",29),s.Qb()),2&t){const t=s.hc(2);s.zb(1),s.oc("ngForOf",t.usedMaterials)}}function j(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div",31),s.Rb(1,"div",32),s.Rb(2,"div",33),s.Rb(3,"div",34),s.Rb(4,"h4"),s.Nb(5,"i",35),s.Hc(6," \u0627\u0644\u0623\u0633\u0627\u0633\u0627\u062a "),s.Qb(),s.Qb(),s.Rb(7,"div",36),s.Rb(8,"div",37),s.Rb(9,"general-summary",38),s.dc("deleteGeneralSummary",(function(e){return s.yc(t),s.hc(2).deleteGeneralSummary(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",33),s.Rb(11,"div",34),s.Rb(12,"h4"),s.Nb(13,"i",39),s.Hc(14," \u0627\u0644\u0645\u0628\u0627\u0646\u064a "),s.Qb(),s.Qb(),s.Rb(15,"div",36),s.Rb(16,"div",37),s.Rb(17,"general-summary",38),s.dc("deleteGeneralSummary",(function(e){return s.yc(t),s.hc(2).deleteGeneralSummary(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(18,"div",33),s.Rb(19,"div",34),s.Rb(20,"h4"),s.Nb(21,"i",40),s.Hc(22," \u0627\u0644\u062a\u0634\u0637\u064a\u0628 "),s.Qb(),s.Qb(),s.Rb(23,"div",36),s.Rb(24,"div",37),s.Rb(25,"general-summary",38),s.dc("deleteGeneralSummary",(function(e){return s.yc(t),s.hc(2).deleteGeneralSummary(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.hc(2);s.zb(9),s.oc("projectId",t.editProject.id)("stageType",1)("reportPage",!0)("data",t.foundationGeneralSummaryData)("mainStageId",t.foundationId)("type","foundation"),s.zb(8),s.oc("projectId",t.editProject.id)("stageType",2)("reportPage",!0)("data",t.buildingGeneralSummaryData)("mainStageId",t.buildingId)("type","building"),s.zb(8),s.oc("projectId",t.editProject.id)("stageType",3)("reportPage",!0)("data",t.finishingGeneralSummaryData)("mainStageId",t.finishingId)("type","finishing")}}function w(t,e){1&t&&(s.Rb(0,"div",58),s.Hc(1," pdf file "),s.Qb())}function S(t,e){1&t&&(s.Rb(0,"div",58),s.Hc(1," pdf file "),s.Qb())}function I(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div",41),s.Rb(1,"div",42),s.Rb(2,"h4"),s.Hc(3," \u062e\u0627\u062a\u0645\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),s.Qb(),s.Qb(),s.Rb(4,"div",43),s.Rb(5,"form",44),s.dc("ngSubmit",(function(){s.yc(t);const e=s.hc(2);return e.addConclusion(e.conclusionForm.value)})),s.Rb(6,"div",2),s.Rb(7,"div",45),s.Rb(8,"div",14),s.Rb(9,"label",46),s.Hc(10," \u0634\u0631\u062d \u0627\u0644\u062e\u0637\u0648\u0627\u062a "),s.Rb(11,"span",13),s.Hc(12,"*"),s.Qb(),s.Qb(),s.Nb(13,"textarea",47),s.Qb(),s.Qb(),s.Rb(14,"div",45),s.Rb(15,"div",14),s.Rb(16,"label",46),s.Hc(17," \u0627\u0644\u0645\u0644\u062e\u0635 \u0627\u0644\u0639\u0627\u0645 \u0644\u0644\u0634\u0631\u0643\u0629 "),s.Qb(),s.Rb(18,"div",48),s.Rb(19,"input",49),s.dc("change",(function(e){return s.yc(t),s.hc(2).uploadReport(e,"company_general_summary")})),s.Qb(),s.Fc(20,w,2,0,"div",50),s.Qb(),s.Nb(21,"i",51),s.Qb(),s.Rb(22,"div",14),s.Rb(23,"label",52),s.Nb(24,"input",53),s.Nb(25,"span",54),s.Hc(26," \u0627\u0638\u0647\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629 \u0644\u0644\u0632\u0627\u0626\u0631 "),s.Qb(),s.Qb(),s.Qb(),s.Rb(27,"div",45),s.Rb(28,"div",14),s.Rb(29,"label",46),s.Hc(30," \u0627\u0644\u0645\u0644\u062e\u0635 \u0627\u0644\u0639\u0627\u0645 \u0644\u0644\u0627\u0633\u062a\u0634\u0627\u0631\u064a "),s.Qb(),s.Rb(31,"div",48),s.Rb(32,"input",49),s.dc("change",(function(e){return s.yc(t),s.hc(2).uploadReport(e,"consultant_general_summary")})),s.Qb(),s.Fc(33,S,2,0,"div",50),s.Qb(),s.Nb(34,"i",51),s.Qb(),s.Qb(),s.Qb(),s.Rb(35,"div",55),s.Rb(36,"button",56),s.Nb(37,"i",57),s.Hc(38," \u062d\u0641\u0638 "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.hc(2);s.zb(5),s.oc("formGroup",t.conclusionForm),s.zb(15),s.oc("ngIf",t.conclusionForm.get("company_general_summary").value),s.zb(13),s.oc("ngIf",t.conclusionForm.get("consultant_general_summary").value)}}function x(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div",2),s.Rb(1,"div",3),s.Rb(2,"div",4),s.Rb(3,"div",5),s.Rb(4,"h3"),s.Nb(5,"i",6),s.Hc(6," \u0627\u0636\u0627\u0641\u0629 \u062a\u0642\u0631\u064a\u0631 "),s.Qb(),s.Rb(7,"a",7),s.Nb(8,"i",8),s.Qb(),s.Qb(),s.Rb(9,"div",9),s.Rb(10,"form",10),s.Rb(11,"div",2),s.Rb(12,"div",11),s.Rb(13,"label",12),s.Nb(14,"i",6),s.Hc(15," \u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),s.Rb(16,"span",13),s.Hc(17,"*"),s.Qb(),s.Qb(),s.Rb(18,"div",14),s.Rb(19,"select",15),s.dc("change",(function(e){return s.yc(t),s.hc().projectChange(e.target.value)})),s.Rb(20,"option",16),s.Hc(21," \u0627\u062e\u062a\u0631 "),s.Qb(),s.Fc(22,y,2,2,"option",17),s.Qb(),s.Qb(),s.Qb(),s.Rb(23,"div",11),s.Rb(24,"label",12),s.Nb(25,"i",18),s.Hc(26," \u0627\u0644\u0639\u0645\u064a\u0644 "),s.Rb(27,"span",13),s.Hc(28,"*"),s.Qb(),s.Qb(),s.Rb(29,"div",14),s.Nb(30,"input",19),s.Qb(),s.Qb(),s.Rb(31,"div",11),s.Rb(32,"label",12),s.Nb(33,"i",20),s.Hc(34," \u0643\u0648\u062f \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),s.Rb(35,"span",13),s.Hc(36,"*"),s.Qb(),s.Qb(),s.Rb(37,"div",14),s.Nb(38,"input",21),s.Qb(),s.Qb(),s.Rb(39,"div",11),s.Rb(40,"label",12),s.Nb(41,"i",22),s.Hc(42," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 "),s.Rb(43,"span",13),s.Hc(44,"*"),s.Qb(),s.Qb(),s.Rb(45,"div",14),s.Nb(46,"input",23),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Fc(47,_,2,1,"div",24),s.Fc(48,j,26,18,"div",25),s.Fc(49,I,39,3,"div",26),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.hc();s.zb(10),s.oc("formGroup",t.projectForm),s.zb(12),s.oc("ngForOf",t.projects),s.zb(25),s.oc("ngIf",t.showBody),s.zb(1),s.oc("ngIf",t.showBody),s.zb(1),s.oc("ngIf",t.showBody)}}function F(t,e){1&t&&s.Nb(0,"ngx-skeleton-loader",59)}let M=(()=>{class t{constructor(t,e,r,a,i,s){this.formBuilder=t,this.clientsService=e,this.projectsService=r,this.apiService=a,this.toaster=i,this.router=s,this.pageType="add",this.pageLoading=!0,this.foundationGeneralSummary=!1,this.buildingGeneralSummary=!1,this.finishingGeneralSummary=!1,this.usedMaterials=[1],this.showBody=!1,this.formData=new FormData}ngOnInit(){this.router.params.subscribe(t=>{t.id&&(this.getProjectDetails(t.id,!0),this.pageType="edit")}),this.projectsService.projects?(this.projects=this.projectsService.projects,this.pageLoading=!1):this.getProjects(),this.createForm()}getClients(){this.clientsService.getClients().subscribe(t=>{t.status&&(this.clients=t.data)})}projectChange(t){t&&(this.editProject=this.projectsService.findProject(t),this.setFormData(this.editProject))}getProjects(){this.projectsService.getProjects().subscribe(t=>{t.status?(this.projects=t.data,this.projectsService.projects=this.projects,this.pageLoading=!1):this.toaster.showError(t.message)},t=>{this.toaster.showError(t.statusText)})}createForm(){this.projectForm=this.formBuilder.group({name:["",[a.p.required]],client:["",[a.p.required]],code:[null,[a.p.required]],address:[null,[a.p.required]]}),this.addProjectForm=this.formBuilder.group({bases:this.formBuilder.array([]),buildings:this.formBuilder.array([]),finishing:this.formBuilder.array([])}),this.conclusionForm=this.formBuilder.group({steps_explain:[null,[a.p.required]],company_general_summary:[null],consultant_general_summary:[null],show_used_materials_to_visitor:[!1]})}getProjectDetails(t,e=!1){t&&this.apiService.getReq(`projects/${t}/`).subscribe(t=>{t.status?(this.editProject=t.data,this.foundationId=t.data.foundation[0].id,this.buildingId=t.data.building[0].id,this.finishingId=t.data.finishing[0].id,e&&(this.conclusionForm.patchValue({steps_explain:this.editProject.steps_explain||"",company_general_summary:this.editProject.company_general_summary||"",consultant_general_summary:this.editProject.consultant_general_summary||"",show_used_materials_to_visitor:this.editProject.show_used_materials_to_visitor||!1}),this.pageLoading=!1,this.setFormData(this.editProject),t.data.used_materials.length&&(this.usedMaterials=t.data.used_materials),t.data.foundation.forEach(t=>{t.is_report&&(t.steps_explain&&(this.foundationGeneralSummaryData=t),this.foundationId=t.id)}),t.data.building.forEach(t=>{t.is_report&&(t.steps_explain&&(this.buildingGeneralSummaryData=t),this.buildingId=t.id)}),t.data.finishing.forEach(t=>{t.is_report&&(this.finishingId=t.id,t.steps_explain&&(this.finishingGeneralSummaryData=t))}))):this.toaster.showError(t.message)},t=>{this.toaster.showError()})}setFormData(t){this.showBody=!0,this.projectForm.patchValue({name:t.id,client:t.client.username,code:t.code,address:t.address})}deleteGeneralSummary(t){switch(t.type){case"foundation":this.foundationGeneralSummary=!1;break;case"building":this.buildingGeneralSummary=!1;break;case"finishing":this.finishingGeneralSummary=!1}}uploadReport(t,e){const r=t.target.files[0];switch(e){case"company_general_summary":this.formData.append("company_general_summary",r,r.name),this.conclusionForm.get("company_general_summary").setValue(r);break;case"consultant_general_summary":this.formData.append("consultant_general_summary",r,r.name),this.conclusionForm.get("consultant_general_summary").setValue(r)}}addConclusion(t){this.conclusionForm.valid&&(this.formData.append("steps_explain",t.steps_explain),this.formData.append("show_used_materials_to_visitor",t.show_used_materials_to_visitor),this.apiService.patchReq(`projects/${this.editProject.id}/`,this.formData).subscribe(t=>{t.status?this.toaster.showSuccess("\u062a\u0645\u062a \u0627\u0636\u0627\u0641\u0629 \u062e\u0627\u062a\u0645\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0628\u0646\u062c\u0627\u062c"):this.toaster.showError(t.errors?t.errors[0]:t.message)},t=>{this.toaster.showError()}))}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(a.c),s.Mb(o.a),s.Mb(n.a),s.Mb(c.a),s.Mb(d.a),s.Mb(l.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["add-report"]],decls:2,vars:2,consts:[["class","row",4,"ngIf"],["count","10","animation","pulse",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-title","add","d-flex","justify-content-between"],[1,"fas","fa-home"],["routerLink","/landing/reports",1,"back-icon"],[1,"fas","fa-chevron-left"],[1,"card-body"],[1,"form",3,"formGroup"],[1,"col-md-3","col-sm-6"],["for","",1,"control-label"],[1,"annotation-required"],[1,"form-group"],["formControlName","name",1,"form-control","select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-user"],["type","text","formControlName","client",1,"form-control"],[1,"fas","fa-calendar"],["type","text","formControlName","code",1,"form-control"],[1,"fas","fa-map-marker-alt"],["type","text","formControlName","address",1,"form-control"],["class","used-materials",4,"ngIf"],["class","steps",4,"ngIf"],["class","project-conclusion",4,"ngIf"],[3,"value"],[1,"used-materials"],[4,"ngFor","ngForOf"],[3,"projectId","data","index","lastChild","deleteMaterials","addMaterials"],[1,"steps"],[1,"row","no-gutters"],[1,"step","col-md-4"],[1,"step-title"],[1,"fas","fa-tools"],[1,"step-body"],[1,"sub-stage"],[3,"projectId","stageType","reportPage","data","mainStageId","type","deleteGeneralSummary"],[1,"fas","fa-building"],[1,"fas","fa-paint-roller"],[1,"project-conclusion"],[1,"title"],[1,"body"],[1,"form",3,"formGroup","ngSubmit"],[1,"col-md-4","col-sm-6"],[1,"control-label"],["rows","4","formControlName","steps_explain",1,"form-control"],[1,"file"],["type","file","accept","application/pdf",1,"form-control",3,"change"],["class","report-name",4,"ngIf"],[1,"fas","fa-paperclip"],[1,"checkbox-container"],["type","checkbox","formControlName","show_used_materials_to_visitor"],[1,"checkmark"],[1,"d-flex","justify-content-end","action-btns"],["type","submit",1,"btn","btn-green"],[1,"fas","fa-save"],[1,"report-name"],["count","10","animation","pulse"]],template:function(t,e){1&t&&(s.Fc(0,x,50,5,"div",0),s.Fc(1,F,1,0,"ngx-skeleton-loader",1)),2&t&&(s.oc("ngIf",!e.pageLoading),s.zb(1),s.oc("ngIf",e.pageLoading))},directives:[i.l,l.e,a.r,a.j,a.e,a.o,a.i,a.d,a.l,a.q,i.k,a.b,g,v.a,a.a,R.a],styles:[".project-conclusion[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:20px -20px 10px;padding:8px;text-align:center;background-color:#186076;color:#fff}"]}),t})();var N=r("PdH4"),P=r.n(N),G=r("lkLn");const H=function(){return{name:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0648\u0639",nameKey:"name",icon:"fas fa-home"}},C=function(){return{name:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",nameKey:"client",icon:"fas fa-user"}},k=function(){return{name:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0634\u0631\u0648\u0639",nameKey:"status",icon:"far fa-lightbulb"}},z=function(){return{name:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0646\u062c\u0627\u0632",nameKey:"total_completion_rate",icon:"fas fa-circle-notch"}},L=function(t,e,r,a){return[t,e,r,a]},E=[{path:"",component:(()=>{class t{constructor(t,e,r,a){this.projectsService=t,this.router=e,this.toaster=r,this.apiService=a}ngOnInit(){this.projectsService.projects?this.projects=this.projectsService.projects:this.getProjects()}getProjects(){this.projectsService.getProjects().subscribe(t=>{t.status?this.projects=t.data:this.toaster.showError(t.message)},t=>{this.toaster.showError(t.statusText)})}addRrport(){this.router.navigate(["/landing/reports/add"])}editRrport(t){this.router.navigate(["/landing/reports/edit/"+t.id])}deleteRrport(t){P.a.fire({title:"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u061f",icon:"danger",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645",cancelButtonText:"\u0627\u0644\u063a\u0627\u0621"}).then(e=>{e.value&&this.apiService.deleteReq(`projects/${t}/delete_report/`).subscribe(t=>{t.status?(this.getProjects(),P.a.fire("\u062a\u0645")):this.toaster.showError(t.message)},t=>{this.toaster.showError()})})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(n.a),s.Mb(l.b),s.Mb(d.a),s.Mb(c.a))},t.\u0275cmp=s.Gb({type:t,selectors:[["report"]],decls:3,vars:12,consts:[[1,"row"],[1,"col-md-12"],[3,"addLabel","data","tableHeads","add","edit","delete"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"data-table",2),s.dc("add",(function(){return e.addRrport()}))("edit",(function(t){return e.editRrport(t)}))("delete",(function(t){return e.deleteRrport(t)})),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.zb(2),s.oc("addLabel","\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0639\u0627\u0645")("data",e.projects)("tableHeads",s.vc(7,L,s.rc(3,H),s.rc(4,C),s.rc(5,k),s.rc(6,z))))},directives:[G.a],styles:[""]}),t})()},{path:"add",component:M},{path:"edit/:id",component:M}];let D=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[l.f.forChild(E)],l.f]}),t})();var B=r("PCNd");let q=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[i.b,D,B.a,a.f,a.n]]}),t})()}}]);